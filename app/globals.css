@import 'react-big-calendar/lib/css/react-big-calendar.css';

@tailwind base;

@custom-variant dark (&:is(.dark *));
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Design System Variables - Base */
    --design-background: 30 14% 97%;
    --design-content-default: 0 0% 8%;
    --design-content-weak: 0 0% 26%;
    --design-content-weakest: 0 0% 8%;
    --design-border-default: 0 0% 88%;
    --design-surface-field: 30 14% 97%;
    --design-button-primary: 0 0% 8%;
    --design-surface-inverted: 0 0% 8%;
    --design-surface-default: 0 0% 100%;
    --design-on-button-content: 0 0% 100%;
    --design-on-button-content-inverted: 0 0% 8%;
    
    /* Shadcn Variables - Mapped to Design System */
    --background: var(--design-background);
    --foreground: var(--design-content-default);
    --card: var(--design-surface-default);
    --card-foreground: var(--design-content-default);
    --popover: var(--design-surface-default);
    --popover-foreground: var(--design-content-default);
    --primary: var(--design-button-primary);
    --primary-foreground: var(--design-on-button-content);
    --secondary: var(--design-surface-field);
    --secondary-foreground: var(--design-content-default);
    --muted: var(--design-surface-field);
    --muted-foreground: var(--design-content-weak);
    --accent: var(--design-surface-field);
    --accent-foreground: var(--design-content-default);
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: var(--design-border-default);
    --input: var(--design-border-default);
    --ring: var(--design-content-default);
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    /* Design System Variables - Dark Mode */
    --design-background: 0 0% 8%;
    --design-content-default: 0 0% 100%;
    --design-content-weak: 0 0% 67%;
    --design-content-weakest: 0 0% 100%;
    --design-border-default: 0 0% 20%;
    --design-surface-field: 0 0% 16%;
    --design-button-primary: 0 0% 100%;
    --design-surface-inverted: 0 0% 8%;
    --design-surface-default: 0 0% 16%;
    --design-on-button-content: 0 0% 8%;
    --design-on-button-content-inverted: 0 0% 100%;
    
    /* Shadcn Variables - Mapped to Design System (Dark Mode) */
    --background: var(--design-background);
    --foreground: var(--design-content-default);
    --card: var(--design-surface-default);
    --card-foreground: var(--design-content-default);
    --popover: var(--design-surface-default);
    --popover-foreground: var(--design-content-default);
    --primary: var(--design-button-primary);
    --primary-foreground: var(--design-on-button-content);
    --secondary: var(--design-surface-field);
    --secondary-foreground: var(--design-content-default);
    --muted: var(--design-surface-field);
    --muted-foreground: var(--design-content-weak);
    --accent: var(--design-surface-field);
    --accent-foreground: var(--design-content-default);
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: var(--design-border-default);
    --input: var(--design-border-default);
    --ring: var(--design-content-default);
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

:root {
  --sidebar: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

.dark {
  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground font-sans;
  }
  input::placeholder,
  textarea::placeholder {
    color: #9D9B9A;
    text-align: left;
  }
}

/* Force Clerk card containers to be transparent - remove white background, border, and shadow */
@layer utilities {
  [data-clerk-element="card"],
  [data-clerk-element="main"],
  [data-clerk-element="page"],
  [data-clerk-element="rootBox"],
  [data-clerk-element="cardBox"] {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    shadow: none !important;
  }
  
  /* Hide firstName and lastName fields in sign-up */
  [data-clerk-element="formFieldFirstName"],
  [data-clerk-element="formFieldLastName"],
  input[name="firstName"],
  input[name="lastName"],
  label[for*="firstName"],
  label[for*="lastName"] {
    display: none !important;
  }

  /* If Clerk still renders the wrapper row (and its "Optional" indicator), hide the whole form field. */
  @supports selector(:has(*)) {
    .cl-formField:has(input[name="firstName"]),
    .cl-formField:has(input[name="lastName"]),
    [data-clerk-element="formField"]:has(input[name="firstName"]),
    [data-clerk-element="formField"]:has(input[name="lastName"]),
    [data-clerk-element="formFieldRow"]:has(input[name="firstName"]),
    [data-clerk-element="formFieldRow"]:has(input[name="lastName"]) {
      display: none !important;
    }
  }
  
  /* Prevent content from being cut off on the left */
  [data-clerk-element="rootBox"],
  [data-clerk-element="cardBox"],
  [data-clerk-element="card"],
  [data-clerk-element="main"],
  [data-clerk-element="page"],
  [data-clerk-element="form"] {
    min-width: 0 !important;
    max-width: 100% !important;
    margin-left: 0 !important;
    padding-left: 0 !important;
  }
  
  /* Hide "Optional" labels in Clerk forms */
  [data-clerk-element="formFieldOptionalIndicator"],
  [data-clerk-element="formFieldHintText"],
  .cl-formFieldOptionalIndicator,
  .cl-formFieldHintText,
  [class*="optional"],
  [class*="Optional"] {
    display: none !important;
    visibility: hidden !important;
  }
  
  /* Hide optional text using attribute selectors */
  [aria-label*="Optional"],
  [aria-label*="optional"] {
    display: none !important;
  }
  
  /* Ensure divider has the exact spacing requested */
  [data-clerk-element="dividerRow"] {
    margin-top: 4px !important;
    margin-bottom: -8px !important;
  }
  
  /* Remove top margin from first form field after divider */
  [data-clerk-element="dividerRow"] + [data-clerk-element="formFields"] > [data-clerk-element="formField"]:first-child,
  [data-clerk-element="dividerRow"] ~ [data-clerk-element="formFields"] > [data-clerk-element="formField"]:first-child {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }
  
  /* Ensure formFields container has no top margin after divider */
  [data-clerk-element="dividerRow"] + [data-clerk-element="formFields"],
  [data-clerk-element="dividerRow"] ~ [data-clerk-element="formFields"] {
    margin-top: 0 !important;
    padding-top: 0 !important;
  }

  /* Clerk injects an invisible submit button for autofill/keyboard flows; hide it entirely. */
  [data-clerk-element="form"] button[type="submit"][aria-hidden="true"] {
    display: none !important;
    pointer-events: none !important;
  }
  
  /* Remove shadows and add only external border to pricing table cards */
  [data-clerk-element*="pricing"] [class*="card"],
  [class*="cl-pricing"] [class*="card"],
  [class*="pricingTable"] [class*="card"],
  [data-clerk-element*="pricing"] [class*="Card"],
  [class*="cl-pricing"] [class*="Card"],
  [class*="pricingTable"] [class*="Card"] {
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
    border: 1px solid hsl(var(--design-border-default)) !important;
    border-radius: 0.75rem !important;
    background: transparent !important;
    background-color: transparent !important;
  }
  
  /* Remove all internal borders and backgrounds from nested elements, except buttons */
  [data-clerk-element*="pricing"] [class*="card"] *:not(button),
  [class*="cl-pricing"] [class*="card"] *:not(button),
  [class*="pricingTable"] [class*="card"] *:not(button),
  [data-clerk-element*="pricing"] [class*="Card"] *:not(button),
  [class*="cl-pricing"] [class*="Card"] *:not(button),
  [class*="pricingTable"] [class*="Card"] *:not(button) {
    border: none !important;
    box-shadow: none !important;
    -webkit-box-shadow: none !important;
  }
  
  /* Set text size to 14px for pricing table content */
  [data-clerk-element*="pricing"] [class*="card"],
  [class*="cl-pricing"] [class*="card"],
  [class*="pricingTable"] [class*="card"],
  [data-clerk-element*="pricing"] [class*="Card"],
  [class*="cl-pricing"] [class*="Card"],
  [class*="pricingTable"] [class*="Card"],
  [data-clerk-element*="pricing"] [class*="card"] *,
  [class*="cl-pricing"] [class*="card"] *,
  [class*="pricingTable"] [class*="card"] *,
  [data-clerk-element*="pricing"] [class*="Card"] *,
  [class*="cl-pricing"] [class*="Card"] *,
  [class*="pricingTable"] [class*="Card"] * {
    font-size: 14px !important;
    line-height: 1.5 !important;
  }
  
  /* Increase price numbers to 32px */
  [data-clerk-element*="pricing"] [class*="price"],
  [data-clerk-element*="pricing"] [class*="Price"],
  [data-clerk-element*="pricing"] [class*="amount"],
  [data-clerk-element*="pricing"] [class*="Amount"],
  [class*="cl-pricing"] [class*="price"],
  [class*="cl-pricing"] [class*="Price"],
  [class*="cl-pricing"] [class*="amount"],
  [class*="cl-pricing"] [class*="Amount"],
  [class*="pricingTable"] [class*="price"],
  [class*="pricingTable"] [class*="Price"],
  [class*="pricingTable"] [class*="amount"],
  [class*="pricingTable"] [class*="Amount"] {
    font-size: 32px !important;
    font-weight: 600 !important;
    line-height: 1.2 !important;
  }
  
  /* Keep "/month" text at 14px */
  [data-clerk-element*="pricing"] [class*="price"] span,
  [data-clerk-element*="pricing"] [class*="Price"] span,
  [class*="cl-pricing"] [class*="price"] span,
  [class*="cl-pricing"] [class*="Price"] span,
  [class*="pricingTable"] [class*="price"] span,
  [class*="pricingTable"] [class*="Price"] span {
    font-size: 14px !important;
  }
  
  /* Keep button text at 14px (already set) */
  [data-clerk-element*="pricing"] button,
  [class*="cl-pricing"] button,
  [class*="pricingTable"] button {
    font-size: 14px !important;
  }
  
  /* Ensure Clerk buttons are visible and styled with black background and white text - very aggressive */
  [data-clerk-element*="pricing"] button,
  [class*="cl-pricing"] button,
  [class*="pricingTable"] button,
  [data-clerk-element*="pricing"] [class*="button"],
  [class*="cl-pricing"] [class*="button"],
  [class*="pricingTable"] [class*="button"],
  [data-clerk-element*="pricing"] [class*="Button"],
  [class*="cl-pricing"] [class*="Button"],
  [class*="pricingTable"] [class*="Button"],
  .dark [data-clerk-element*="pricing"] button,
  .dark [class*="cl-pricing"] button,
  .dark [class*="pricingTable"] button,
  .dark [data-clerk-element*="pricing"] [class*="button"],
  .dark [class*="cl-pricing"] [class*="button"],
  .dark [class*="pricingTable"] [class*="button"] {
    display: inline-flex !important;
    visibility: visible !important;
    background-color: #141414 !important;
    background: #141414 !important;
    background-image: none !important;
    color: white !important;
    border: none !important;
    border-radius: 9999px !important;
    padding: 0.625rem 1.25rem !important;
    height: 44px !important;
    font-size: 14px !important;
    font-weight: 500 !important;
    transition: all 200ms ease-in-out !important;
  }
  
  [data-clerk-element*="pricing"] button:hover,
  [class*="cl-pricing"] button:hover,
  [class*="pricingTable"] button:hover,
  [data-clerk-element*="pricing"] [class*="button"]:hover,
  [class*="cl-pricing"] [class*="button"]:hover,
  [class*="pricingTable"] [class*="button"]:hover,
  .dark [data-clerk-element*="pricing"] button:hover,
  .dark [class*="cl-pricing"] button:hover,
  .dark [class*="pricingTable"] button:hover {
    background-color: #333333 !important;
    background: #333333 !important;
    background-image: none !important;
    opacity: 0.9 !important;
  }
  
  [data-clerk-element*="pricing"] button:active,
  [class*="cl-pricing"] button:active,
  [class*="pricingTable"] button:active,
  [data-clerk-element*="pricing"] [class*="button"]:active,
  [class*="cl-pricing"] [class*="button"]:active,
  [class*="pricingTable"] [class*="button"]:active,
  .dark [data-clerk-element*="pricing"] button:active,
  .dark [class*="cl-pricing"] button:active,
  .dark [class*="pricingTable"] button:active {
    background-color: #000000 !important;
    background: #000000 !important;
    background-image: none !important;
    opacity: 0.8 !important;
  }
  
  /* React Big Calendar - Clean Refactored Styles */
  
  /* Base Calendar Styles */
  .rbc-calendar {
    background: hsl(var(--card));
    color: hsl(var(--foreground));
    font-family: var(--font-radio-canada-big), sans-serif;
    font-size: 13px;
  }

  /* Typography - All text at 13px */
  .rbc-calendar,
  .rbc-calendar * {
    font-size: 13px;
  }

  /* Header Styles - Remove cell background, keep only text */
  .rbc-header {
    background: transparent !important;
    color: hsl(var(--foreground));
    border: none !important;
    border-bottom: none !important;
    padding: 8px 8px 4px 8px;
    font-weight: 600;
    text-align: center;
  }
  
  /* Remove header row background and borders */
  .rbc-time-header-content {
    background: transparent !important;
    border: none !important;
    border-left: none !important;
  }
  
  .rbc-time-header {
    background: transparent !important;
    border: none !important;
    border-bottom: none !important;
  }
  
  /* Remove all header row cell backgrounds and borders */
  .rbc-time-header table,
  .rbc-time-header table td,
  .rbc-time-header table th,
  .rbc-time-header-cell,
  .rbc-time-header-gutter {
    background: transparent !important;
    border: none !important;
  }

  /* Event Styles */
  .rbc-event {
    border-radius: 6px;
    padding: 2px 4px;
  }

  .rbc-event-content {
    font-weight: 500;
  }

  /* Drag and Drop Styles */
  /* Original event (stays in place) - 50% opacity instead of hidden */
  .big-calendar-wrapper .rbc-addons-dnd .rbc-addons-dnd-dragged-event,
  .rbc-addons-dnd .rbc-addons-dnd-dragged-event.rbc-event,
  .rbc-addons-dnd-dragged-event {
    opacity: 0.5 !important;
  }

  /* Dragged event preview - 100% opacity */
  .big-calendar-wrapper .rbc-addons-dnd .rbc-addons-dnd-drag-preview,
  .rbc-addons-dnd .rbc-addons-dnd-drag-preview.rbc-event,
  .rbc-addons-dnd-drag-preview {
    opacity: 1 !important;
  }

  /* Ensure normal events have full opacity when not dragging */
  .rbc-event:not(.rbc-addons-dnd-dragged-event):not(.rbc-addons-dnd-drag-preview) {
    opacity: 1;
  }

  /* Borders and Layout */
  .rbc-time-slot {
    border-top: 1px solid hsl(var(--border));
  }

  .rbc-day-slot .rbc-time-slot {
    border-top: 1px solid hsl(var(--border) / 0.5);
  }

  .rbc-time-header-content {
    border-left: none;
  }

  .rbc-time-content {
    border-top: 2px solid hsl(var(--border));
  }

  .rbc-time-header {
    border-bottom: none;
  }

  .rbc-day-bg {
    border: 1px solid hsl(var(--border));
  }

  /* View Containers */
  .rbc-month-view,
  .rbc-time-view,
  .rbc-agenda-view {
    border: 1px solid hsl(var(--border));
    border-radius: 8px;
    overflow: hidden;
  }

  /* Agenda View */
  .rbc-agenda-date-cell,
  .rbc-agenda-time-cell {
    border-right: 1px solid hsl(var(--border));
    padding: 8px;
  }

  .rbc-agenda-event-cell {
    padding: 8px;
  }

  .rbc-agenda-table tbody > tr > td {
    border-bottom: 1px solid hsl(var(--border));
  }

  /* Special States */
  .rbc-today {
    background-color: hsl(var(--primary) / 0.1);
  }

  .rbc-off-range-bg {
    background: hsl(var(--muted) / 0.3);
  }

  /* Hide default toolbar */
  .rbc-toolbar {
    display: none !important;
  }

  /* Dark mode adjustments */
  .dark .rbc-off-range-bg {
    background: hsl(var(--muted) / 0.2);
  }

  .dark .rbc-today {
    background-color: hsl(var(--primary) / 0.15);
  }
}

/* Calendar Layout and Alignment - Outside layer for proper specificity */
/* Table layout for consistent column widths */
.rbc-time-view table {
  table-layout: fixed;
  width: 100%;
}

/* Ensure time header gutter and time gutter are in the same column and match width */
.rbc-time-view .rbc-time-header table,
.rbc-time-view .rbc-time-content table {
  table-layout: fixed;
  width: 100%;
}

/* Make sure the first column (time gutter) matches between header and content */
.rbc-time-view .rbc-time-header table col:first-child,
.rbc-time-view .rbc-time-content table col:first-child {
  width: auto;
}

/* Ensure header gutter cell and time gutter cell have identical width */
/* Both should have the same width since they're in the first column of their respective tables */
.rbc-time-view .rbc-time-header .rbc-time-header-gutter {
  width: 76px !important;
  min-width: 76px !important;
  max-width: 76px !important;
  box-sizing: border-box;
}

.rbc-time-view .rbc-time-content .rbc-time-gutter {
  width: 76px !important;
  min-width: 76px !important;
  max-width: 76px !important;
  box-sizing: border-box;
}

/* Time Gutter - Left column with time labels */
/* Ensure header gutter and time gutter have matching widths */
.rbc-time-header-gutter,
.rbc-time-gutter {
  box-sizing: border-box;
  padding: 0 8px;
  width: auto;
  min-width: 60px;
  font-size: 13px !important;
}

/* Force both to use the same width calculation - they're in the same table column */
.rbc-time-header-gutter {
  width: auto;
}

.rbc-time-gutter {
  width: auto;
}

.rbc-time-header-gutter *,
.rbc-time-gutter * {
  font-size: 13px !important;
}

.rbc-time-header-gutter .rbc-label,
.rbc-time-gutter .rbc-label {
  text-align: center;
  display: block;
  font-size: 13px !important;
}

/* Additional specificity for time column */
.rbc-time-column,
.rbc-time-column * {
  font-size: 13px !important;
}

/* Day Columns - Equal width distribution */
.rbc-time-header-content {
  width: 0;
  min-width: 0;
  box-sizing: border-box;
}

.rbc-time-header-content .rbc-header {
  width: 100%;
  box-sizing: border-box;
}

.rbc-day-bg,
.rbc-day-slot {
  width: 0;
  min-width: 0;
  box-sizing: border-box;
  padding: 0;
}

/* Fix scrollbar alignment issue */
.rbc-time-view .rbc-time-header.rbc-overflowing {
  margin-right: 0;
}

/* Ensure time gutter font size with maximum specificity */
.big-calendar-wrapper .rbc-time-header-gutter,
.big-calendar-wrapper .rbc-time-header-gutter *,
.big-calendar-wrapper .rbc-time-gutter,
.big-calendar-wrapper .rbc-time-gutter *,
.big-calendar-wrapper .rbc-time-column,
.big-calendar-wrapper .rbc-time-column *,
.big-calendar-wrapper .rbc-time-header-gutter .rbc-label,
.big-calendar-wrapper .rbc-time-gutter .rbc-label {
  font-size: 13px !important;
}
